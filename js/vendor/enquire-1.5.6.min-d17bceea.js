// Copyright (c) 2013 Nick Williams - http://wicky.nillia.ms/enquire.js
window.enquire=function(t){"use strict";function i(t,i){var n,s=0,e=t.length;for(s;e>s&&(n=i(t[s],s),n!==!1);s++);}function n(t){return"[object Array]"===Object.prototype.toString.apply(t)}function s(t){return"function"==typeof t}function e(t){this.initialised=!1,this.options=t,t.deferSetup||this.setup()}function o(t,i){this.query=t,this.isUnconditional=i,this.handlers=[],this.matched=!1}function r(){if(!t)throw new Error("matchMedia is required");var i=new o("only all");this.queries={},this.listening=!1,this.browserIsIncapable=!i.matchMedia()}return e.prototype={setup:function(t){this.options.setup&&this.options.setup(t),this.initialised=!0},on:function(t){this.initialised||this.setup(t),this.options.match(t)},off:function(t){this.options.unmatch&&this.options.unmatch(t)},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(t){return this.options===t||this.options.match===t}},o.prototype={matchMedia:function(){return t(this.query).matches},addHandler:function(t,i){var n=new e(t);this.handlers.push(n),i&&this.matched&&n.on()},removeHandler:function(t){var n=this.handlers;i(n,function(i,s){return i.equals(t)?(i.destroy(),!n.splice(s,1)):void 0})},assess:function(t){this.matchMedia()||this.isUnconditional?this.match(t):this.unmatch(t)},match:function(t){this.matched||(i(this.handlers,function(i){i.on(t)}),this.matched=!0)},unmatch:function(t){this.matched&&(i(this.handlers,function(i){i.off(t)}),this.matched=!1)}},r.prototype={register:function(t,e,r){var h=this.queries,a=r&&this.browserIsIncapable,u=this.listening;return h.hasOwnProperty(t)||(h[t]=new o(t,a),this.listening&&h[t].assess()),s(e)&&(e={match:e}),n(e)||(e=[e]),i(e,function(i){h[t].addHandler(i,u)}),this},unregister:function(t,n){var s=this.queries;return s.hasOwnProperty(t)?(n?s[t].removeHandler(n):(i(this.queries[t].handlers,function(t){t.destroy()}),delete s[t]),this):this},fire:function(t){var i,n=this.queries;for(i in n)n.hasOwnProperty(i)&&n[i].assess(t);return this},listen:function(t){function i(i){var s;window.addEventListener(i,function(i){s&&clearTimeout(s),s=setTimeout(function(){n.fire(i)},t)},!1)}var n=this;return t=t||500,this.listening?this:(window.addEventListener&&(i("resize"),i("orientationChange")),n.fire(),this.listening=!0,this)}},new r}(window.matchMedia);