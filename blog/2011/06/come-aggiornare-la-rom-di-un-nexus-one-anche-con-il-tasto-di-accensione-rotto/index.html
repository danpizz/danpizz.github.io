<!DOCTYPE html>
<html lang="it">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Come aggiornare la ROM di un Nexus One (anche con il tasto di accensione rotto)</title>
  <meta name="description" content="Quando ho iniziato a sviluppare applicazioni per Android, mi sono informato su quale fosse il telefonino Android di riferimento per i programmatori. Ne avevo...">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://danielepizzoni.it/blog/2011/06/come-aggiornare-la-rom-di-un-nexus-one-anche-con-il-tasto-di-accensione-rotto/">
  <link rel="alternate" type="application/rss+xml" title="Daniele Pizzoni" href="/feed.xml">
  
  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-21153020-1', 'auto');
  ga('send', 'pageview');

</script>
  

  
</head>


  <body>

    <header class="site-header" role="banner">

  <div class="wrapper">
    
    
    <a class="site-title" href="/">Daniele Pizzoni</a>
  
    
      <nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path fill="#424242" d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.031C17.335,0,18,0.665,18,1.484L18,1.484z"/>
              <path fill="#424242" d="M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0c0-0.82,0.665-1.484,1.484-1.484 h15.031C17.335,6.031,18,6.696,18,7.516L18,7.516z"/>
              <path fill="#424242" d="M18,13.516C18,14.335,17.335,15,16.516,15H1.484C0.665,15,0,14.335,0,13.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.031C17.335,12.031,18,12.696,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger">
          
            
            
            <a class="page-link" href="/blog/">Blog</a>
            
          
            
            
            <a class="page-link" href="/contatti/">Contatti</a>
            
          
        </div>
      </nav>
    
  </div>
</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title" itemprop="name headline">Come aggiornare la ROM di un Nexus One (anche con il tasto di accensione rotto)</h1>
    <p class="post-meta">
      <time datetime="2011-06-09T00:00:00+02:00" itemprop="datePublished">
        
        Jun 9, 2011
      </time>
      </p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p>Quando ho iniziato a sviluppare applicazioni per Android, mi sono informato su quale fosse il telefonino Android di riferimento per i programmatori. Ne avevo bisogno come strumento di lavoro per il testing e lo sviluppo delle applicazioni stesse.</p>

<p>Di <a href="http://it.wikipedia.org/wiki/Nexus_One">Google Nexus One</a> avevo naturalmente già sentito parlare. Il Nexus One, oltre ad avere il marchio Google stampato sul retro, essere piuttosto costoso e abbastanza difficile da trovare in Italia, ha il noioso difetto della frequente rottura del tasto di accensione. Difetto che, nel mio caso, non avrebbe dovuto incidere più di tanto: il telefono si può accendere anche togliendo e rimettendo la batteria.</p>

<p>Ho così acquistato ad un buon prezzo un Nexus One con il tasto di accensione fuori uso. Poi la necessità e curiosità di installarci diverse versioni del sistema operativo mi ha portato alla scoperta… che il tasto di accensione serve a navigare il menù del <em>bootloader</em>! (@$#!)</p>

<p>Questo articolo (per esperti e smanettoni appassionati) racconta come fare ad aggiornare la ROM del Nexus One (unlocked) con gli strumenti standard e il tasto accensione fuori uso. È un utile riferimento anche per chi ha il tasto funzionante, vista l’enorme, frammentaria e dispersiva mole di informazioni che si trova in rete sull’argomento.<!--more--></p>

<p><strong>Attenzione</strong>: aggiornare la ROM comporta la cancellazione di tutti i dati del telefono!</p>

<h2 id="il-problema">Il problema</h2>

<p>Con il tasto accensione rotto non si può attivare il <em>recovery mode</em>, a meno di non avere installato una <a href="http://forum.xda-developers.com/wiki/index.php?title=Nexus_One/Recovery_Images">custom recovery image</a>.</p>

<p>Ci sono due modi per entrare in recovery mode.</p>

<p>Il primo è scegliere l’opzione RECOVERY dal menu del bootloader. Ma con il tasto power rotto è impossibile perché non si può confermare la scelta del menu di boot.</p>

<p>Il secondo è usare dal terminale del computer (con telefono collegato e acceso) il comando <code>adb reboot recovery</code>. Con il tasto accensione rotto questo è possibile solo con una custom recovery image, perché le ROM stock in modalità recovery mostrano un’immagine con l’Androide Verde assieme a un punto esclamativo e da lì bisognerebbe di premere Volume UP + Power Button per entrare nel menu di recovery.</p>

<p>Come se non bastasse, quando si spegne il telefonino il sistema rimpiazza l’immagine di recovery con quella che c’era quando è stato acceso. Di conseguenza un aggiornamento contenente anche un’immagine di recovery applicato su un Nexus One con il tasto Power rotto sostituirà quest’ultima in maniera irreversibile!</p>

<h2 id="gli-strumenti">Gli strumenti</h2>

<p>Ci servono due strumenti della <a href="http://developer.android.com/sdk/index.html">SDK Android</a>: <strong><code>adb</code></strong> e <strong><code>fastboot</code></strong>. <code>fastboot</code> però viene distribuito da Google solo come sorgente. L’eseguibile per Linux, Windows e OS X si può scaricare dall’<a href="http://developer.htc.com/adp.html">HTC Developer Center</a>. Per usare <code>adb</code> bisogna abilitare l’opzione</p>

<blockquote>
  <p>Impostazioni &gt; Applicazioni &gt; Sviluppo &gt; Debug USB</p>
</blockquote>

<h2 id="procedimento">Procedimento</h2>

<p>Esistono due tipi di aggiornamento ROM: <em>full image</em> e <em>update</em>.</p>

<p>Una <strong>full image</strong> è un file zip che contiene in genere 4 immagini di filesystem che vanno flashate (sui forum: “cucinate”) sul telefonino, cancellando completamente i filesystem presenti.</p>

<ul>
  <li>boot.img</li>
  <li>recovery.img</li>
  <li>system.img</li>
  <li>userdata.img</li>
</ul>

<p>Un <strong>update</strong> è un file zip contenente i file aggiornati e uno script che viene usato per aggiornare il sistema a partire dalla modalità recovery.</p>

<p><em>Per aggiornare il nostro Nexus One con il tasto rotto dobbiamo prima applicare una ROM full, quindi sostituire la recovery con una immagine custom e infine ricordarsi per ogni update di cancellare dall’archivio zip la directory recovery.</em></p>
<h2>Applicare una full image</h2>
<p>Si collega il telefono al computer e lo si accende <em>tenendo premuta la trackball</em>. Si scompatta lo zip e dalla directory che si ottiene e da un terminale del computer si eseguono i comandi:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>fastboot erase cache
<span class="gp">$ </span>fastboot erase userdata
<span class="gp">$ </span>fastboot flash boot boot.img
<span class="gp">$ </span>fastboot flash recovery recovery.img
<span class="gp">$ </span>fastboot flash system system.img
<span class="gp">$ </span>fastboot flash userdata userdata.img
<span class="gp">$ </span>fastboot reboot
</code></pre>
</div>

<p>Se si vuole preservare una <em>custom recovery</em> installata in precedenza basta saltare il passo corrispondente.</p>

<p>Esiste un secondo sistema per applicare una full ROM. Funziona (credo) solo con ROM originali per via dei controlli sulle firme digitali degli aggiornamenti. Se lo usiamo nel nostro caso perché non avremo più modo di sostituire la recovery image, ma può essere utile per installare pure Stock ROM.</p>

<p>Consiste in chiamare lo zip contenente i file .img con il nome <code>PASSIMG.zip</code>, copiarlo sulla root della SD Card con</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>adb push signed-passion-img-GRI40.zip /mnt/sdcard/PASSIMG.zip
</code></pre>
</div>

<p>e riavviare il telefono (togliendo e rimettendo la batteria) mentre si tiene premuto il tasto Volume Down. Dopo qualche secondo il bootloader installa automaticamente il file.</p>

<h2 id="aggiornare-con-un-update">Aggiornare con un update</h2>

<p>Per aggiornare con una update bisogna avere la possibilità di fare boot in <em>recovery mode</em>.</p>

<p>Bisogna copiare il file .zip di aggiornamento sulla SD Card, ad esempio:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>adb push update-cm-7.0.0-N1-signed.zip /mnt/sdcard
</code></pre>
</div>

<p>e poi entrare in recovery mode.</p>

<p>Con il tasto power funzionante si accende il telefono con il tasto Volume Down premuto e si sceglie RECOVERY dal menu.</p>

<p>Con il tasto power rotto si deve eseguire il comando</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>adb reboot recovery
</code></pre>
</div>

<p>da terminale.</p>

<p>Poi si cancella la cache e gli altri dati e si installa il file tramite il menu <em>Install update from sdcard</em> del recovery mode.</p>

<h2 id="le-fonti-di-informazioni">Le fonti di informazioni</h2>

<p>Questi procedimenti non sono troppo complicati ma non essendoci fonti ufficiali ed organiche diventa faticoso raggiungere le informazioni davvero rilevanti. Le fonti principali su cui mi sono basato sono:</p>
<ul>
	<li><a href="http://forum.xda-developers.com/wiki/index.php?title=Nexus_One">Nexus One: Guides, FAQs &amp; Tutorials</a> dal Wiki di <a href="http://www.xda-developers.com/">xda-developers</a></li>
	<li><a href="http://wiki.cyanogenmod.com/index.php?title=Nexus_One:_Full_Update_Guide">Nexus One: Full Update Guide</a> dal Wiki di <a href="http://www.cyanogenmod.com/">CyanogenMod</a></li>
	<li>HTC Developer Center: <a href="http://developer.htc.com/adp.html">tools and info</a> and <a href="http://developer.htc.com/">Stock ROMs</a></li>
	<li><a href="http://android-dls.com/wiki/index.php?title=Android_FAQ">Android FAQ</a> sul Wiki <a href="http://android-dls.com/">android-dls.com</a></li>
	<li><a href="http://forum.xda-developers.com/showthread.php?t=1012382">[HOW TO] Revert to latest stock ROM (GRI40)</a></li>
</ul>

  </div>

  
</article>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <!-- <h2 class="footer-heading">Daniele Pizzoni</h2> -->

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <!-- <li>
            
              Daniele Pizzoni
            
          </li> -->
          <li>
            Daniele Pizzoni - P.I. 02632010308
          </li>
            
          <li><a href="mailto:dan@danielepizzoni.it">dan@danielepizzoni.it</a></li>
            
          <li>
            <a href="/cookieprivacypolicy/">Privacy info</a>
          </li>
        </ul>
      </div>

      <div class="footer-col footer-col-2">
        <ul class="social-media-list">

          <li>
            <a href="https://www.linkedin.com/in/danielepizzoni/"><span class="icon icon--linkedin"><svg viewBox="0 0 16 16" width="16px" height="16px"><path d="M13.632 13.635h-2.37V9.922c0-.886-.018-2.025-1.234-2.025-1.235 0-1.424.964-1.424 1.96v3.778h-2.37V6H8.51v1.04h.03c.318-.6 1.092-1.233 2.247-1.233 2.4 0 2.845 1.58 2.845 3.637v4.188zM3.558 4.955c-.762 0-1.376-.617-1.376-1.377 0-.758.614-1.375 1.376-1.375.76 0 1.376.617 1.376 1.375 0 .76-.617 1.377-1.376 1.377zm1.188 8.68H2.37V6h2.376v7.635zM14.816 0H1.18C.528 0 0 .516 0 1.153v13.694C0 15.484.528 16 1.18 16h13.635c.652 0 1.185-.516 1.185-1.153V1.153C16 .516 15.467 0 14.815 0z" fill-rule="nonzero"/></svg>
</span><span class="username">danielepizzoni</span></a>

          </li>

          <li>
            <a href="https://stackoverflow.com/users/story/103529"><span class="icon icon--stackoverflow"><svg viewBox="0 0 16 16" width="16px" height="16px"><path d="M12.658 14.577v-4.27h1.423V16H1.23v-5.693h1.42v4.27h10.006zm-8.583-1.423h7.16V11.73h-7.16v1.424zm.173-3.235l6.987 1.46.3-1.38L4.55 8.54l-.302 1.38zm.906-3.37l6.47 3.02.602-1.3-6.47-3.02-.602 1.29zm1.81-3.19l5.478 4.57.906-1.08L7.87 2.28l-.9 1.078zM10.502 0L9.338.863l4.27 5.735 1.164-.862L10.5 0z"/></svg>
</span><span class="username">ildan</span></a>

          </li>

        </ul>
      </div>

      <div class="footer-col footer-col-3">
        <p>Artigiano del Software. Frontend and backend app developer.
</p>
      </div>
    </div>

  </div>


</footer>


  </body>

</html>
